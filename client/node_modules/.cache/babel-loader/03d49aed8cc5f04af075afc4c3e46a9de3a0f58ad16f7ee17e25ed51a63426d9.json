{"ast":null,"code":"var _jsxFileName = \"/Users/queen/Downloads/Budget Tracker/client/src/components/Dashboard/popups/addExpense.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport instance from \"../../../utils/AxiosConfig\";\nimport \"../../../styles/frndPop.css\";\n\n// New fields:\n// - category (string)\n// - date (ISO date string)\n// - splitWith (comma-separated emails including OR excluding payer; we make sure payer is included on compute)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CATEGORIES = [\"Food & Dining\", \"Transport\", \"Shopping\", \"Rent & Utilities\", \"Entertainment\", \"Health\", \"Other\"];\nexport default function AddExpense({\n  onClose\n}) {\n  _s();\n  const [form, setForm] = useState({\n    description: \"\",\n    amount: \"\",\n    paidBy: \"\",\n    splitWith: \"\",\n    // e.g. \"me@example.com, friend1@x.com, friend2@x.com\"\n    category: \"Other\",\n    date: new Date().toISOString().slice(0, 10) // yyyy-mm-dd\n  });\n  const [msg, setMsg] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const onChange = e => setForm({\n    ...form,\n    [e.target.id]: e.target.value\n  });\n  const add = async () => {\n    setMsg(\"\");\n    setLoading(true);\n    try {\n      // For backward compatibility, also send paidTo as everything except paidBy.\n      const participants = String(form.splitWith || \"\").split(/[,\\s]+/).map(s => s.trim()).filter(Boolean);\n      const paidToList = participants.filter(x => x && x.toLowerCase() !== String(form.paidBy || \"\").toLowerCase()).join(\", \");\n      const payload = {\n        description: form.description,\n        amount: form.amount,\n        paidBy: form.paidBy,\n        paidTo: paidToList,\n        // legacy\n        splitWith: form.splitWith,\n        category: form.category,\n        date: form.date\n      };\n      await instance.post(\"/user/expense/add\", payload);\n      setMsg(\"✅ Expense added\");\n      setForm({\n        description: \"\",\n        amount: \"\",\n        paidBy: \"\",\n        splitWith: \"\",\n        category: \"Other\",\n        date: new Date().toISOString().slice(0, 10)\n      });\n    } catch (e) {\n      var _e$response, _e$response$data;\n      setMsg((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.msg) || \"❌ Error adding expense\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-card glass\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Add Expense\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"description\",\n          placeholder: \"Description (e.g., Dinner)\",\n          value: form.description,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"amount\",\n          placeholder: \"Amount\",\n          type: \"number\",\n          value: form.amount,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"paidBy\",\n          placeholder: \"Paid by (email)\",\n          value: form.paidBy,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"splitWith\",\n          placeholder: \"Split with (emails, comma-separated)\",\n          value: form.splitWith,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"category\",\n          value: form.category,\n          onChange: onChange,\n          children: CATEGORIES.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: c,\n            children: c\n          }, c, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"date\",\n          type: \"date\",\n          value: form.date,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: add,\n          disabled: loading,\n          children: loading ? \"Adding…\" : \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn outline\",\n          onClick: onClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), msg && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mini\",\n        style: {\n          marginTop: 8\n        },\n        children: msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n_s(AddExpense, \"ywD3PsZGy5BzcdcW5aKL/lXfntQ=\");\n_c = AddExpense;\nvar _c;\n$RefreshReg$(_c, \"AddExpense\");","map":{"version":3,"names":["React","useState","instance","jsxDEV","_jsxDEV","CATEGORIES","AddExpense","onClose","_s","form","setForm","description","amount","paidBy","splitWith","category","date","Date","toISOString","slice","msg","setMsg","loading","setLoading","onChange","e","target","id","value","add","participants","String","split","map","s","trim","filter","Boolean","paidToList","x","toLowerCase","join","payload","paidTo","post","_e$response","_e$response$data","response","data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","type","c","onClick","disabled","style","marginTop","_c","$RefreshReg$"],"sources":["/Users/queen/Downloads/Budget Tracker/client/src/components/Dashboard/popups/addExpense.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport instance from \"../../../utils/AxiosConfig\";\r\nimport \"../../../styles/frndPop.css\";\r\n\r\n// New fields:\r\n// - category (string)\r\n// - date (ISO date string)\r\n// - splitWith (comma-separated emails including OR excluding payer; we make sure payer is included on compute)\r\nconst CATEGORIES = [\r\n  \"Food & Dining\",\r\n  \"Transport\",\r\n  \"Shopping\",\r\n  \"Rent & Utilities\",\r\n  \"Entertainment\",\r\n  \"Health\",\r\n  \"Other\",\r\n];\r\n\r\nexport default function AddExpense({ onClose }) {\r\n  const [form, setForm] = useState({\r\n    description: \"\",\r\n    amount: \"\",\r\n    paidBy: \"\",\r\n    splitWith: \"\", // e.g. \"me@example.com, friend1@x.com, friend2@x.com\"\r\n    category: \"Other\",\r\n    date: new Date().toISOString().slice(0, 10), // yyyy-mm-dd\r\n  });\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const onChange = (e) => setForm({ ...form, [e.target.id]: e.target.value });\r\n\r\n  const add = async () => {\r\n    setMsg(\"\");\r\n    setLoading(true);\r\n    try {\r\n      // For backward compatibility, also send paidTo as everything except paidBy.\r\n      const participants = String(form.splitWith || \"\")\r\n        .split(/[,\\s]+/)\r\n        .map((s) => s.trim())\r\n        .filter(Boolean);\r\n      const paidToList = participants\r\n        .filter(\r\n          (x) =>\r\n            x && x.toLowerCase() !== String(form.paidBy || \"\").toLowerCase()\r\n        )\r\n        .join(\", \");\r\n\r\n      const payload = {\r\n        description: form.description,\r\n        amount: form.amount,\r\n        paidBy: form.paidBy,\r\n        paidTo: paidToList, // legacy\r\n        splitWith: form.splitWith,\r\n        category: form.category,\r\n        date: form.date,\r\n      };\r\n\r\n      await instance.post(\"/user/expense/add\", payload);\r\n      setMsg(\"✅ Expense added\");\r\n      setForm({\r\n        description: \"\",\r\n        amount: \"\",\r\n        paidBy: \"\",\r\n        splitWith: \"\",\r\n        category: \"Other\",\r\n        date: new Date().toISOString().slice(0, 10),\r\n      });\r\n    } catch (e) {\r\n      setMsg(e?.response?.data?.msg || \"❌ Error adding expense\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal\">\r\n      <div className=\"modal-card glass\">\r\n        <h3>Add Expense</h3>\r\n        <div className=\"grid2\">\r\n          <input\r\n            id=\"description\"\r\n            placeholder=\"Description (e.g., Dinner)\"\r\n            value={form.description}\r\n            onChange={onChange}\r\n          />\r\n          <input\r\n            id=\"amount\"\r\n            placeholder=\"Amount\"\r\n            type=\"number\"\r\n            value={form.amount}\r\n            onChange={onChange}\r\n          />\r\n          <input\r\n            id=\"paidBy\"\r\n            placeholder=\"Paid by (email)\"\r\n            value={form.paidBy}\r\n            onChange={onChange}\r\n          />\r\n          <input\r\n            id=\"splitWith\"\r\n            placeholder=\"Split with (emails, comma-separated)\"\r\n            value={form.splitWith}\r\n            onChange={onChange}\r\n          />\r\n          <select id=\"category\" value={form.category} onChange={onChange}>\r\n            {CATEGORIES.map((c) => (\r\n              <option key={c} value={c}>\r\n                {c}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <input id=\"date\" type=\"date\" value={form.date} onChange={onChange} />\r\n        </div>\r\n        <div className=\"modal-actions\">\r\n          <button className=\"btn\" onClick={add} disabled={loading}>\r\n            {loading ? \"Adding…\" : \"Add\"}\r\n          </button>\r\n          <button className=\"btn outline\" onClick={onClose}>\r\n            Close\r\n          </button>\r\n        </div>\r\n        {msg && (\r\n          <p className=\"mini\" style={{ marginTop: 8 }}>\r\n            {msg}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}