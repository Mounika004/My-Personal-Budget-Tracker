{"ast":null,"code":"import instance from \"../utils/AxiosConfig\";\nimport { pushToast } from \"../redux/reducers/uiReducer\";\nimport { store } from \"../redux/store\";\nconst d = action => store.dispatch(action);\nexport async function loadMe() {\n  d({\n    type: \"ME_LOADING\"\n  });\n  try {\n    var _cats$data;\n    const {\n      data\n    } = await instance.get(\"/user/me\");\n    d({\n      type: \"ME_SET\",\n      payload: {\n        email: data.email,\n        username: data.username,\n        expenses: data.expensis || [],\n        friends: data.friends || []\n      }\n    });\n    const cats = await instance.get(\"/user/categories\").catch(() => null);\n    if (cats !== null && cats !== void 0 && (_cats$data = cats.data) !== null && _cats$data !== void 0 && _cats$data.categories) d({\n      type: \"ME_SET_CATEGORIES\",\n      payload: cats.data.categories\n    });\n  } catch (e) {\n    var _e$response, _e$response2, _e$response3, _e$response3$data;\n    console.error(\"loadMe\", e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status, e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : _e$response2.data);\n    d({\n      type: \"ME_ERROR\",\n      error: (e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.msg) || \"Load error\"\n    });\n    d(pushToast(\"Could not load your data\", \"error\"));\n  }\n}\nexport async function addExpense(payload) {\n  const {\n    data\n  } = await instance.post(\"/user/expense/add\", payload);\n  d({\n    type: \"ME_SET_EXPENSES\",\n    payload: data.expensis || []\n  });\n  d(pushToast(\"Expense added\", \"success\"));\n}\nexport async function editExpense(id, patch) {\n  try {\n    const {\n      data\n    } = await instance.patch(`/user/expense/${id}`, patch);\n    d({\n      type: \"ME_SET_EXPENSES\",\n      payload: data.expensis || []\n    });\n    d(pushToast(\"Expense updated\", \"success\"));\n  } catch (e) {\n    var _e$response4, _e$response4$data;\n    d(pushToast((e === null || e === void 0 ? void 0 : (_e$response4 = e.response) === null || _e$response4 === void 0 ? void 0 : (_e$response4$data = _e$response4.data) === null || _e$response4$data === void 0 ? void 0 : _e$response4$data.msg) || \"Update failed\", \"error\"));\n    throw e;\n  }\n}\nexport async function deleteExpense(id) {\n  try {\n    const {\n      data\n    } = await instance.delete(`/user/expense/${id}`);\n    d({\n      type: \"ME_SET_EXPENSES\",\n      payload: data.expensis || []\n    });\n    d(pushToast(\"Expense deleted\", \"success\"));\n  } catch (e) {\n    var _e$response5, _e$response5$data;\n    d(pushToast((e === null || e === void 0 ? void 0 : (_e$response5 = e.response) === null || _e$response5 === void 0 ? void 0 : (_e$response5$data = _e$response5.data) === null || _e$response5$data === void 0 ? void 0 : _e$response5$data.msg) || \"Delete failed\", \"error\"));\n    throw e;\n  }\n}\nexport async function settleWithFriend(friendEmail, amount) {\n  try {\n    const {\n      data\n    } = await instance.post(\"/user/settle/friend\", {\n      friendEmail,\n      amount\n    });\n    d({\n      type: \"ME_SET_EXPENSES\",\n      payload: data.expensis || []\n    });\n    d(pushToast(\"Settlement recorded\", \"success\"));\n  } catch (e) {\n    var _e$response6, _e$response6$data;\n    d(pushToast((e === null || e === void 0 ? void 0 : (_e$response6 = e.response) === null || _e$response6 === void 0 ? void 0 : (_e$response6$data = _e$response6.data) === null || _e$response6$data === void 0 ? void 0 : _e$response6$data.msg) || \"Settlement failed\", \"error\"));\n    throw e;\n  }\n}\nexport async function addCategory(name, color) {\n  const {\n    data\n  } = await instance.post(\"/user/category\", {\n    name,\n    color\n  });\n  d({\n    type: \"ME_SET_CATEGORIES\",\n    payload: data.categories || []\n  });\n  d(pushToast(\"Category added\", \"success\"));\n}\nexport async function renameCategory(oldName, newName, color) {\n  const {\n    data\n  } = await instance.patch(`/user/category/${encodeURIComponent(oldName)}`, {\n    newName,\n    color\n  });\n  if (data.expensis) d({\n    type: \"ME_SET_EXPENSES\",\n    payload: data.expensis\n  });\n  if (data.categories) d({\n    type: \"ME_SET_CATEGORIES\",\n    payload: data.categories\n  });\n  d(pushToast(\"Category updated\", \"success\"));\n}","map":{"version":3,"names":["instance","pushToast","store","d","action","dispatch","loadMe","type","_cats$data","data","get","payload","email","username","expenses","expensis","friends","cats","catch","categories","e","_e$response","_e$response2","_e$response3","_e$response3$data","console","error","response","status","msg","addExpense","post","editExpense","id","patch","_e$response4","_e$response4$data","deleteExpense","delete","_e$response5","_e$response5$data","settleWithFriend","friendEmail","amount","_e$response6","_e$response6$data","addCategory","name","color","renameCategory","oldName","newName","encodeURIComponent"],"sources":["/Users/queen/Downloads/Budget Tracker/client/src/data/meApi.js"],"sourcesContent":["import instance from \"../utils/AxiosConfig\";\nimport { pushToast } from \"../redux/reducers/uiReducer\";\nimport { store } from \"../redux/store\";\n\nconst d = (action) => store.dispatch(action);\n\nexport async function loadMe() {\n  d({ type: \"ME_LOADING\" });\n  try {\n    const { data } = await instance.get(\"/user/me\");\n    d({\n      type: \"ME_SET\",\n      payload: {\n        email: data.email,\n        username: data.username,\n        expenses: data.expensis || [],\n        friends: data.friends || [],\n      },\n    });\n    const cats = await instance.get(\"/user/categories\").catch(() => null);\n    if (cats?.data?.categories)\n      d({ type: \"ME_SET_CATEGORIES\", payload: cats.data.categories });\n  } catch (e) {\n    console.error(\"loadMe\", e?.response?.status, e?.response?.data);\n    d({ type: \"ME_ERROR\", error: e?.response?.data?.msg || \"Load error\" });\n    d(pushToast(\"Could not load your data\", \"error\"));\n  }\n}\n\nexport async function addExpense(payload) {\n  const { data } = await instance.post(\"/user/expense/add\", payload);\n  d({ type: \"ME_SET_EXPENSES\", payload: data.expensis || [] });\n  d(pushToast(\"Expense added\", \"success\"));\n}\n\nexport async function editExpense(id, patch) {\n  try {\n    const { data } = await instance.patch(`/user/expense/${id}`, patch);\n    d({ type: \"ME_SET_EXPENSES\", payload: data.expensis || [] });\n    d(pushToast(\"Expense updated\", \"success\"));\n  } catch (e) {\n    d(pushToast(e?.response?.data?.msg || \"Update failed\", \"error\"));\n    throw e;\n  }\n}\n\nexport async function deleteExpense(id) {\n  try {\n    const { data } = await instance.delete(`/user/expense/${id}`);\n    d({ type: \"ME_SET_EXPENSES\", payload: data.expensis || [] });\n    d(pushToast(\"Expense deleted\", \"success\"));\n  } catch (e) {\n    d(pushToast(e?.response?.data?.msg || \"Delete failed\", \"error\"));\n    throw e;\n  }\n}\n\nexport async function settleWithFriend(friendEmail, amount) {\n  try {\n    const { data } = await instance.post(\"/user/settle/friend\", {\n      friendEmail,\n      amount,\n    });\n    d({ type: \"ME_SET_EXPENSES\", payload: data.expensis || [] });\n    d(pushToast(\"Settlement recorded\", \"success\"));\n  } catch (e) {\n    d(pushToast(e?.response?.data?.msg || \"Settlement failed\", \"error\"));\n    throw e;\n  }\n}\n\nexport async function addCategory(name, color) {\n  const { data } = await instance.post(\"/user/category\", { name, color });\n  d({ type: \"ME_SET_CATEGORIES\", payload: data.categories || [] });\n  d(pushToast(\"Category added\", \"success\"));\n}\n\nexport async function renameCategory(oldName, newName, color) {\n  const { data } = await instance.patch(\n    `/user/category/${encodeURIComponent(oldName)}`,\n    { newName, color }\n  );\n  if (data.expensis) d({ type: \"ME_SET_EXPENSES\", payload: data.expensis });\n  if (data.categories)\n    d({ type: \"ME_SET_CATEGORIES\", payload: data.categories });\n  d(pushToast(\"Category updated\", \"success\"));\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}