{"ast":null,"code":"import instance from \"../utils/AxiosConfig\";\nimport { pushToast } from \"../redux/reducers/uiReducer\";\nimport { store } from \"../redux/store\";\nimport { setFriendLabel } from \"../utils/friends\";\nconst d = action => store.dispatch(action);\nexport async function loadMe() {\n  d({\n    type: \"ME_LOADING\"\n  });\n  try {\n    var _cats$data;\n    const {\n      data\n    } = await instance.get(\"/user/me\");\n    d({\n      type: \"ME_SET\",\n      payload: {\n        email: data.email,\n        username: data.username,\n        expenses: data.expensis || [],\n        friends: data.friends || []\n      }\n    });\n    const cats = await instance.get(\"/user/categories\").catch(() => null);\n    if (cats !== null && cats !== void 0 && (_cats$data = cats.data) !== null && _cats$data !== void 0 && _cats$data.categories) d({\n      type: \"ME_SET_CATEGORIES\",\n      payload: cats.data.categories\n    });\n  } catch (e) {\n    var _e$response, _e$response$data;\n    d({\n      type: \"ME_ERROR\",\n      error: (e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.msg) || \"Load error\"\n    });\n    d(pushToast(\"Could not load your data\", \"error\"));\n  }\n}\nexport async function addFriend(friendEmail, friendName) {\n  try {\n    await instance.post(\"/user/friend/add\", {\n      friendEmail\n    });\n    if (friendName) setFriendLabel(friendEmail, friendName);\n    d(pushToast(\"Friend added\", \"success\"));\n    await loadMe(); // refresh list so friend appears even with 0 balance\n  } catch (e) {\n    var _e$response2, _e$response2$data;\n    d(pushToast((e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.msg) || \"Add friend failed\", \"error\"));\n    throw e;\n  }\n}\nexport async function addExpense(payload) {\n  const {\n    data\n  } = await instance.post(\"/user/expense/add\", payload);\n  d({\n    type: \"ME_SET_EXPENSES\",\n    payload: data.expensis || []\n  });\n  d(pushToast(\"Expense added\", \"success\"));\n}\nexport async function editExpense(id, patch) {\n  try {\n    const {\n      data\n    } = await instance.patch(`/user/expense/${id}`, patch);\n    d({\n      type: \"ME_SET_EXPENSES\",\n      payload: data.expensis || []\n    });\n    d(pushToast(\"Expense updated\", \"success\"));\n  } catch (e) {\n    var _e$response3, _e$response3$data;\n    d(pushToast((e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.msg) || \"Update failed\", \"error\"));\n    throw e;\n  }\n}\nexport async function deleteExpense(id) {\n  try {\n    const {\n      data\n    } = await instance.delete(`/user/expense/${id}`);\n    d({\n      type: \"ME_SET_EXPENSES\",\n      payload: data.expensis || []\n    });\n    d(pushToast(\"Expense deleted\", \"success\"));\n  } catch (e) {\n    var _e$response4, _e$response4$data;\n    d(pushToast((e === null || e === void 0 ? void 0 : (_e$response4 = e.response) === null || _e$response4 === void 0 ? void 0 : (_e$response4$data = _e$response4.data) === null || _e$response4$data === void 0 ? void 0 : _e$response4$data.msg) || \"Delete failed\", \"error\"));\n    throw e;\n  }\n}\nexport async function settleWithFriend(friendEmail, amount) {\n  try {\n    const {\n      data\n    } = await instance.post(\"/user/settle/friend\", {\n      friendEmail,\n      amount\n    });\n    d({\n      type: \"ME_SET_EXPENSES\",\n      payload: data.expensis || []\n    });\n    d(pushToast(\"Settlement recorded\", \"success\"));\n  } catch (e) {\n    var _e$response5, _e$response5$data;\n    d(pushToast((e === null || e === void 0 ? void 0 : (_e$response5 = e.response) === null || _e$response5 === void 0 ? void 0 : (_e$response5$data = _e$response5.data) === null || _e$response5$data === void 0 ? void 0 : _e$response5$data.msg) || \"Settlement failed\", \"error\"));\n    throw e;\n  }\n}\nexport async function addCategory(name, color) {\n  const {\n    data\n  } = await instance.post(\"/user/category\", {\n    name,\n    color\n  });\n  d({\n    type: \"ME_SET_CATEGORIES\",\n    payload: data.categories || []\n  });\n  d(pushToast(\"Category added\", \"success\"));\n}\nexport async function renameCategory(oldName, newName, color) {\n  const {\n    data\n  } = await instance.patch(`/user/category/${encodeURIComponent(oldName)}`, {\n    newName,\n    color\n  });\n  if (data.expensis) d({\n    type: \"ME_SET_EXPENSES\",\n    payload: data.expensis\n  });\n  if (data.categories) d({\n    type: \"ME_SET_CATEGORIES\",\n    payload: data.categories\n  });\n  d(pushToast(\"Category updated\", \"success\"));\n}","map":{"version":3,"names":["instance","pushToast","store","setFriendLabel","d","action","dispatch","loadMe","type","_cats$data","data","get","payload","email","username","expenses","expensis","friends","cats","catch","categories","e","_e$response","_e$response$data","error","response","msg","addFriend","friendEmail","friendName","post","_e$response2","_e$response2$data","addExpense","editExpense","id","patch","_e$response3","_e$response3$data","deleteExpense","delete","_e$response4","_e$response4$data","settleWithFriend","amount","_e$response5","_e$response5$data","addCategory","name","color","renameCategory","oldName","newName","encodeURIComponent"],"sources":["/Users/queen/Downloads/Budget Tracker/client/src/data/meApi.js"],"sourcesContent":["import instance from \"../utils/AxiosConfig\";\nimport { pushToast } from \"../redux/reducers/uiReducer\";\nimport { store } from \"../redux/store\";\nimport { setFriendLabel } from \"../utils/friends\";\n\nconst d = (action) => store.dispatch(action);\n\nexport async function loadMe() {\n  d({ type: \"ME_LOADING\" });\n  try {\n    const { data } = await instance.get(\"/user/me\");\n    d({\n      type: \"ME_SET\",\n      payload: {\n        email: data.email,\n        username: data.username,\n        expenses: data.expensis || [],\n        friends: data.friends || [],\n      },\n    });\n    const cats = await instance.get(\"/user/categories\").catch(() => null);\n    if (cats?.data?.categories)\n      d({ type: \"ME_SET_CATEGORIES\", payload: cats.data.categories });\n  } catch (e) {\n    d({ type: \"ME_ERROR\", error: e?.response?.data?.msg || \"Load error\" });\n    d(pushToast(\"Could not load your data\", \"error\"));\n  }\n}\n\nexport async function addFriend(friendEmail, friendName) {\n  try {\n    await instance.post(\"/user/friend/add\", { friendEmail });\n    if (friendName) setFriendLabel(friendEmail, friendName);\n    d(pushToast(\"Friend added\", \"success\"));\n    await loadMe(); // refresh list so friend appears even with 0 balance\n  } catch (e) {\n    d(pushToast(e?.response?.data?.msg || \"Add friend failed\", \"error\"));\n    throw e;\n  }\n}\n\nexport async function addExpense(payload) {\n  const { data } = await instance.post(\"/user/expense/add\", payload);\n  d({ type: \"ME_SET_EXPENSES\", payload: data.expensis || [] });\n  d(pushToast(\"Expense added\", \"success\"));\n}\n\nexport async function editExpense(id, patch) {\n  try {\n    const { data } = await instance.patch(`/user/expense/${id}`, patch);\n    d({ type: \"ME_SET_EXPENSES\", payload: data.expensis || [] });\n    d(pushToast(\"Expense updated\", \"success\"));\n  } catch (e) {\n    d(pushToast(e?.response?.data?.msg || \"Update failed\", \"error\"));\n    throw e;\n  }\n}\n\nexport async function deleteExpense(id) {\n  try {\n    const { data } = await instance.delete(`/user/expense/${id}`);\n    d({ type: \"ME_SET_EXPENSES\", payload: data.expensis || [] });\n    d(pushToast(\"Expense deleted\", \"success\"));\n  } catch (e) {\n    d(pushToast(e?.response?.data?.msg || \"Delete failed\", \"error\"));\n    throw e;\n  }\n}\n\nexport async function settleWithFriend(friendEmail, amount) {\n  try {\n    const { data } = await instance.post(\"/user/settle/friend\", {\n      friendEmail,\n      amount,\n    });\n    d({ type: \"ME_SET_EXPENSES\", payload: data.expensis || [] });\n    d(pushToast(\"Settlement recorded\", \"success\"));\n  } catch (e) {\n    d(pushToast(e?.response?.data?.msg || \"Settlement failed\", \"error\"));\n    throw e;\n  }\n}\n\nexport async function addCategory(name, color) {\n  const { data } = await instance.post(\"/user/category\", { name, color });\n  d({ type: \"ME_SET_CATEGORIES\", payload: data.categories || [] });\n  d(pushToast(\"Category added\", \"success\"));\n}\n\nexport async function renameCategory(oldName, newName, color) {\n  const { data } = await instance.patch(\n    `/user/category/${encodeURIComponent(oldName)}`,\n    { newName, color }\n  );\n  if (data.expensis) d({ type: \"ME_SET_EXPENSES\", payload: data.expensis });\n  if (data.categories)\n    d({ type: \"ME_SET_CATEGORIES\", payload: data.categories });\n  d(pushToast(\"Category updated\", \"success\"));\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}