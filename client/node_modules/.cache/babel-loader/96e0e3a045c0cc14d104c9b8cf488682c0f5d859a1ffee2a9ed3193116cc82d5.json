{"ast":null,"code":"var _jsxFileName = \"/Users/queen/Downloads/Budget Tracker/client/src/components/Dashboard/MiddleDashboard.js\",\n  _s = $RefreshSig$();\n// client/src/components/Dashboard/MiddleDashboard.js\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport AddExpense from \"./popups/addExpense\";\nimport SettleUp from \"./popups/settleUp\";\nimport EditExpense from \"./popups/EditExpense\";\nimport Confirm from \"./popups/Confirm\";\nimport CategoryChart from \"./CategoryChart\";\nimport { computeFromExpenses, formatCurrency } from \"../../utils/finance\";\nimport { loadMe, deleteExpense } from \"../../data/meApi\";\nimport { toCSV } from \"../../utils/csv\"; // ⬅️ only export kept; no parseCSV\n\nimport { getFriendLabel } from \"../../utils/friends\";\nimport \"../../styles/dashboard.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction niceName(email, me) {\n  if (!email) return \"\";\n  if (me !== null && me !== void 0 && me.email && email === me.email && me.username) return me.username;\n  const local = String(email).split(\"@\")[0];\n  return local.replace(/[._-]+/g, \" \").replace(/\\b\\w/g, m => m.toUpperCase());\n}\nfunction labelFor(id, me) {\n  return getFriendLabel(id) || niceName(id, me) || id;\n}\nconst targetKey = (email, y, m) => `monthly_target_${email || \"me\"}_${y}_${m}`;\nexport default function MiddleDashboard({\n  externalShowAdd,\n  externalShowSettle,\n  onCloseAdd,\n  onCloseSettle,\n  onOpenAdd,\n  onOpenSettle\n}) {\n  _s();\n  const {\n    loading,\n    me,\n    expenses,\n    categories\n  } = useSelector(s => s.me);\n  const [showAdd, setShowAdd] = useState(false);\n  const [showSettle, setShowSettle] = useState(false);\n  const [editItem, setEditItem] = useState(null);\n  const [confirmDel, setConfirmDel] = useState(null);\n  const [month, setMonth] = useState(new Date().getMonth());\n  const [catFilter, setCatFilter] = useState(\"\");\n  useEffect(() => setShowAdd(!!externalShowAdd), [externalShowAdd]);\n  useEffect(() => setShowSettle(!!externalShowSettle), [externalShowSettle]);\n  useEffect(() => {\n    loadMe();\n  }, []);\n  const stats = useMemo(() => computeFromExpenses(me === null || me === void 0 ? void 0 : me.email, expenses, {\n    monthFilter: month,\n    categoryFilter: catFilter || null\n  }), [me, expenses, month, catFilter]);\n  const {\n    totals,\n    recent,\n    chart\n  } = stats;\n\n  // ----- monthly target (persist per user+month) -----\n  const y = new Date().getFullYear();\n  const [target, setTarget] = useState(() => {\n    const saved = localStorage.getItem(targetKey(me === null || me === void 0 ? void 0 : me.email, y, month));\n    return saved ? Number(saved) : 2000;\n  });\n  useEffect(() => {\n    const saved = localStorage.getItem(targetKey(me === null || me === void 0 ? void 0 : me.email, y, month));\n    setTarget(saved ? Number(saved) : 2000);\n  }, [me === null || me === void 0 ? void 0 : me.email, month]);\n  const saveTarget = () => {\n    localStorage.setItem(targetKey(me === null || me === void 0 ? void 0 : me.email, y, month), String(target || 0));\n  };\n  const progressPct = target > 0 ? Math.min(100, chart.total / target * 100) : 0;\n\n  // Export CSV (kept)\n  const exportCSV = () => {\n    const csv = toCSV(expenses);\n    const blob = new Blob([csv], {\n      type: \"text/csv;charset=utf-8;\"\n    });\n    const a = document.createElement(\"a\");\n    a.href = URL.createObjectURL(blob);\n    a.download = \"expenses.csv\";\n    a.click();\n  };\n  const months = Array.from({\n    length: 12\n  }, (_, i) => i);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"middle\",\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"quick-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"qa-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          value: month,\n          onChange: e => setMonth(Number(e.target.value)),\n          children: months.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: m,\n            children: new Date(2000, m, 1).toLocaleString(\"en-US\", {\n              month: \"long\"\n            })\n          }, m, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: catFilter,\n          onChange: e => setCatFilter(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: c.name,\n            children: c.name\n          }, c.name, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"qa-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: () => {\n            setShowAdd(true);\n            onOpenAdd && onOpenAdd();\n          },\n          children: \"+ Add Expense\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn outline\",\n          onClick: () => {\n            setShowSettle(true);\n            onOpenSettle && onOpenSettle();\n          },\n          children: \"Settle Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn ghost\",\n          onClick: exportCSV,\n          children: \"Export CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"cards\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card glass\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-top\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"chip green\",\n            children: \"Total Balance\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `big ${loading ? \"skel\" : \"\"}`,\n          children: formatCurrency(totals.totalBalance)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mini\",\n          children: loading ? \"Loading…\" : \"Net of owe/owed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card glass\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-top\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"chip red\",\n            children: \"You Owe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `big ${loading ? \"skel\" : \"\"}`,\n          children: formatCurrency(totals.youOwe)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mini\",\n          children: loading ? \"Loading…\" : \"What you need to pay\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card glass\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-top\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"chip blue\",\n            children: \"Owed to You\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `big ${loading ? \"skel\" : \"\"}`,\n          children: formatCurrency(totals.owedToMe)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mini\",\n          children: loading ? \"Loading…\" : \"What others owe you\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card glass wide\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-top\",\n          style: {\n            display: \"flex\",\n            gap: 8,\n            alignItems: \"center\",\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"chip\",\n              children: \"Monthly Spend\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mini\",\n              style: {\n                marginLeft: 8\n              },\n              children: new Date(2000, month, 1).toLocaleString(\"en-US\", {\n                month: \"long\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mini\",\n            children: [\"Target:\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: target,\n              onChange: e => setTarget(Number(e.target.value)),\n              onBlur: saveTarget,\n              style: {\n                width: 90,\n                padding: \"4px 8px\",\n                borderRadius: 8,\n                border: \"1px solid var(--border)\",\n                background: \"var(--input)\",\n                color: \"var(--text)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bar\",\n            style: {\n              width: `${progressPct}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mini\",\n          children: [formatCurrency(chart.total), \" (your share) of\", \" \", formatCurrency(target), \" \\u2014 \", Math.round(progressPct), \"% used\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"panels\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel glass\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: 0\n            },\n            children: \"Recent Activity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn outline\",\n            onClick: () => loadMe(),\n            children: \"Refresh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"skel\",\n          style: {\n            height: 140\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this) : recent.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mini\",\n          children: \"No activity for the current filters.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"activity\",\n          children: recent.map(r => {\n            const isSettle = String(r.category).toLowerCase() === \"transfers\" && /^settlement/i.test(String(r.description || \"\"));\n\n            // Show net for settlements (posted amount is 2×)\n            const shownAmount = isSettle ? Math.round((Number(r.amount) || 0) / 2) : r.amount;\n\n            // Pretty description: \"Settlement with <Name>\"\n            let displayDesc = r.description || \"\";\n            if (isSettle) {\n              const m = /Settlement with\\s+(.+)$/i.exec(displayDesc);\n              if (m && m[1]) {\n                const id = m[1].trim();\n                displayDesc = `Settlement with ${labelFor(id, me)}`;\n              }\n            }\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"dot blue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: displayDesc\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 23\n                }, this), \" \\u2014 \", formatCurrency(shownAmount), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"mini\",\n                  style: {\n                    marginLeft: 8\n                  },\n                  children: [\"by \", niceName(r.paidBy, me), \" \\u2022 \", r.category]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  gap: 8\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn ghost\",\n                  onClick: () => setEditItem(r),\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn outline\",\n                  onClick: () => setConfirmDel(r),\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 21\n              }, this)]\n            }, r.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CategoryChart, {\n        data: chart.data,\n        total: chart.total\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), showAdd && /*#__PURE__*/_jsxDEV(AddExpense, {\n      onClose: () => {\n        setShowAdd(false);\n        onCloseAdd && onCloseAdd();\n        loadMe();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 9\n    }, this), showSettle && /*#__PURE__*/_jsxDEV(SettleUp, {\n      onClose: () => {\n        setShowSettle(false);\n        onCloseSettle && onCloseSettle();\n        loadMe();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 9\n    }, this), editItem && /*#__PURE__*/_jsxDEV(EditExpense, {\n      item: editItem,\n      onClose: () => {\n        setEditItem(null);\n        loadMe();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 9\n    }, this), confirmDel && /*#__PURE__*/_jsxDEV(Confirm, {\n      title: \"Delete expense?\",\n      subtitle: confirmDel.description,\n      onCancel: () => setConfirmDel(null),\n      onConfirm: async () => {\n        try {\n          if (!confirmDel.id) throw new Error(\"Missing id (legacy item)\");\n          await deleteExpense(confirmDel.id);\n        } finally {\n          setConfirmDel(null);\n          loadMe();\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n_s(MiddleDashboard, \"I4dy8zs6/LZsxhBG5spCGcgeyMA=\", false, function () {\n  return [useSelector];\n});\n_c = MiddleDashboard;\nvar _c;\n$RefreshReg$(_c, \"MiddleDashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useSelector","AddExpense","SettleUp","EditExpense","Confirm","CategoryChart","computeFromExpenses","formatCurrency","loadMe","deleteExpense","toCSV","getFriendLabel","jsxDEV","_jsxDEV","niceName","email","me","username","local","String","split","replace","m","toUpperCase","labelFor","id","targetKey","y","MiddleDashboard","externalShowAdd","externalShowSettle","onCloseAdd","onCloseSettle","onOpenAdd","onOpenSettle","_s","loading","expenses","categories","s","showAdd","setShowAdd","showSettle","setShowSettle","editItem","setEditItem","confirmDel","setConfirmDel","month","setMonth","Date","getMonth","catFilter","setCatFilter","stats","monthFilter","categoryFilter","totals","recent","chart","getFullYear","target","setTarget","saved","localStorage","getItem","Number","saveTarget","setItem","progressPct","Math","min","total","exportCSV","csv","blob","Blob","type","a","document","createElement","href","URL","createObjectURL","download","click","months","Array","from","length","_","i","className","children","value","onChange","e","map","toLocaleString","fileName","_jsxFileName","lineNumber","columnNumber","c","name","onClick","totalBalance","youOwe","owedToMe","style","display","gap","alignItems","justifyContent","marginLeft","onBlur","width","padding","borderRadius","border","background","color","round","margin","height","r","isSettle","category","toLowerCase","test","description","shownAmount","amount","displayDesc","exec","trim","paidBy","data","onClose","item","title","subtitle","onCancel","onConfirm","Error","_c","$RefreshReg$"],"sources":["/Users/queen/Downloads/Budget Tracker/client/src/components/Dashboard/MiddleDashboard.js"],"sourcesContent":["// client/src/components/Dashboard/MiddleDashboard.js\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport AddExpense from \"./popups/addExpense\";\r\nimport SettleUp from \"./popups/settleUp\";\r\nimport EditExpense from \"./popups/EditExpense\";\r\nimport Confirm from \"./popups/Confirm\";\r\nimport CategoryChart from \"./CategoryChart\";\r\n\r\nimport { computeFromExpenses, formatCurrency } from \"../../utils/finance\";\r\nimport { loadMe, deleteExpense } from \"../../data/meApi\";\r\nimport { toCSV } from \"../../utils/csv\"; // ⬅️ only export kept; no parseCSV\r\n\r\nimport { getFriendLabel } from \"../../utils/friends\";\r\nimport \"../../styles/dashboard.css\";\r\n\r\nfunction niceName(email, me) {\r\n  if (!email) return \"\";\r\n  if (me?.email && email === me.email && me.username) return me.username;\r\n  const local = String(email).split(\"@\")[0];\r\n  return local.replace(/[._-]+/g, \" \").replace(/\\b\\w/g, (m) => m.toUpperCase());\r\n}\r\nfunction labelFor(id, me) {\r\n  return getFriendLabel(id) || niceName(id, me) || id;\r\n}\r\n\r\nconst targetKey = (email, y, m) => `monthly_target_${email || \"me\"}_${y}_${m}`;\r\n\r\nexport default function MiddleDashboard({\r\n  externalShowAdd,\r\n  externalShowSettle,\r\n  onCloseAdd,\r\n  onCloseSettle,\r\n  onOpenAdd,\r\n  onOpenSettle,\r\n}) {\r\n  const { loading, me, expenses, categories } = useSelector((s) => s.me);\r\n\r\n  const [showAdd, setShowAdd] = useState(false);\r\n  const [showSettle, setShowSettle] = useState(false);\r\n  const [editItem, setEditItem] = useState(null);\r\n  const [confirmDel, setConfirmDel] = useState(null);\r\n\r\n  const [month, setMonth] = useState(new Date().getMonth());\r\n  const [catFilter, setCatFilter] = useState(\"\");\r\n\r\n  useEffect(() => setShowAdd(!!externalShowAdd), [externalShowAdd]);\r\n  useEffect(() => setShowSettle(!!externalShowSettle), [externalShowSettle]);\r\n  useEffect(() => {\r\n    loadMe();\r\n  }, []);\r\n\r\n  const stats = useMemo(\r\n    () =>\r\n      computeFromExpenses(me?.email, expenses, {\r\n        monthFilter: month,\r\n        categoryFilter: catFilter || null,\r\n      }),\r\n    [me, expenses, month, catFilter]\r\n  );\r\n  const { totals, recent, chart } = stats;\r\n\r\n  // ----- monthly target (persist per user+month) -----\r\n  const y = new Date().getFullYear();\r\n  const [target, setTarget] = useState(() => {\r\n    const saved = localStorage.getItem(targetKey(me?.email, y, month));\r\n    return saved ? Number(saved) : 2000;\r\n  });\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(targetKey(me?.email, y, month));\r\n    setTarget(saved ? Number(saved) : 2000);\r\n  }, [me?.email, month]);\r\n  const saveTarget = () => {\r\n    localStorage.setItem(targetKey(me?.email, y, month), String(target || 0));\r\n  };\r\n  const progressPct =\r\n    target > 0 ? Math.min(100, (chart.total / target) * 100) : 0;\r\n\r\n  // Export CSV (kept)\r\n  const exportCSV = () => {\r\n    const csv = toCSV(expenses);\r\n    const blob = new Blob([csv], { type: \"text/csv;charset=utf-8;\" });\r\n    const a = document.createElement(\"a\");\r\n    a.href = URL.createObjectURL(blob);\r\n    a.download = \"expenses.csv\";\r\n    a.click();\r\n  };\r\n\r\n  const months = Array.from({ length: 12 }, (_, i) => i);\r\n\r\n  return (\r\n    <main className=\"middle\">\r\n      {/* Filters + tools */}\r\n      <section className=\"quick-actions\">\r\n        <div className=\"qa-left\">\r\n          <select\r\n            value={month}\r\n            onChange={(e) => setMonth(Number(e.target.value))}\r\n          >\r\n            {months.map((m) => (\r\n              <option key={m} value={m}>\r\n                {new Date(2000, m, 1).toLocaleString(\"en-US\", {\r\n                  month: \"long\",\r\n                })}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <select\r\n            value={catFilter}\r\n            onChange={(e) => setCatFilter(e.target.value)}\r\n          >\r\n            <option value=\"\">All Categories</option>\r\n            {categories.map((c) => (\r\n              <option key={c.name} value={c.name}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"qa-right\">\r\n          <button\r\n            className=\"btn\"\r\n            onClick={() => {\r\n              setShowAdd(true);\r\n              onOpenAdd && onOpenAdd();\r\n            }}\r\n          >\r\n            + Add Expense\r\n          </button>\r\n          <button\r\n            className=\"btn outline\"\r\n            onClick={() => {\r\n              setShowSettle(true);\r\n              onOpenSettle && onOpenSettle();\r\n            }}\r\n          >\r\n            Settle Up\r\n          </button>\r\n          <button className=\"btn ghost\" onClick={exportCSV}>\r\n            Export CSV\r\n          </button>\r\n          {/* Import CSV removed intentionally */}\r\n        </div>\r\n      </section>\r\n\r\n      {/* Stat cards */}\r\n      <section className=\"cards\">\r\n        <div className=\"card glass\">\r\n          <div className=\"card-top\">\r\n            <span className=\"chip green\">Total Balance</span>\r\n          </div>\r\n          <div className={`big ${loading ? \"skel\" : \"\"}`}>\r\n            {formatCurrency(totals.totalBalance)}\r\n          </div>\r\n          <div className=\"mini\">{loading ? \"Loading…\" : \"Net of owe/owed\"}</div>\r\n        </div>\r\n\r\n        <div className=\"card glass\">\r\n          <div className=\"card-top\">\r\n            <span className=\"chip red\">You Owe</span>\r\n          </div>\r\n          <div className={`big ${loading ? \"skel\" : \"\"}`}>\r\n            {formatCurrency(totals.youOwe)}\r\n          </div>\r\n          <div className=\"mini\">\r\n            {loading ? \"Loading…\" : \"What you need to pay\"}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card glass\">\r\n          <div className=\"card-top\">\r\n            <span className=\"chip blue\">Owed to You</span>\r\n          </div>\r\n          <div className={`big ${loading ? \"skel\" : \"\"}`}>\r\n            {formatCurrency(totals.owedToMe)}\r\n          </div>\r\n          <div className=\"mini\">\r\n            {loading ? \"Loading…\" : \"What others owe you\"}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Monthly target card */}\r\n        <div className=\"card glass wide\">\r\n          <div\r\n            className=\"card-top\"\r\n            style={{\r\n              display: \"flex\",\r\n              gap: 8,\r\n              alignItems: \"center\",\r\n              justifyContent: \"space-between\",\r\n            }}\r\n          >\r\n            <div>\r\n              <span className=\"chip\">Monthly Spend</span>\r\n              <span className=\"mini\" style={{ marginLeft: 8 }}>\r\n                {new Date(2000, month, 1).toLocaleString(\"en-US\", {\r\n                  month: \"long\",\r\n                })}\r\n              </span>\r\n            </div>\r\n            <div className=\"mini\">\r\n              Target:&nbsp;\r\n              <input\r\n                type=\"number\"\r\n                value={target}\r\n                onChange={(e) => setTarget(Number(e.target.value))}\r\n                onBlur={saveTarget}\r\n                style={{\r\n                  width: 90,\r\n                  padding: \"4px 8px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid var(--border)\",\r\n                  background: \"var(--input)\",\r\n                  color: \"var(--text)\",\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"progress\">\r\n            <div className=\"bar\" style={{ width: `${progressPct}%` }} />\r\n          </div>\r\n          <div className=\"mini\">\r\n            {formatCurrency(chart.total)} (your share) of{\" \"}\r\n            {formatCurrency(target)} — {Math.round(progressPct)}% used\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Panels */}\r\n      <section className=\"panels\">\r\n        <div className=\"panel glass\">\r\n          <div className=\"panel-head\">\r\n            <h3 style={{ margin: 0 }}>Recent Activity</h3>\r\n            <button className=\"btn outline\" onClick={() => loadMe()}>\r\n              Refresh\r\n            </button>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"skel\" style={{ height: 140 }} />\r\n          ) : recent.length === 0 ? (\r\n            <div className=\"mini\">No activity for the current filters.</div>\r\n          ) : (\r\n            <ul className=\"activity\">\r\n              {recent.map((r) => {\r\n                const isSettle =\r\n                  String(r.category).toLowerCase() === \"transfers\" &&\r\n                  /^settlement/i.test(String(r.description || \"\"));\r\n\r\n                // Show net for settlements (posted amount is 2×)\r\n                const shownAmount = isSettle\r\n                  ? Math.round((Number(r.amount) || 0) / 2)\r\n                  : r.amount;\r\n\r\n                // Pretty description: \"Settlement with <Name>\"\r\n                let displayDesc = r.description || \"\";\r\n                if (isSettle) {\r\n                  const m = /Settlement with\\s+(.+)$/i.exec(displayDesc);\r\n                  if (m && m[1]) {\r\n                    const id = m[1].trim();\r\n                    displayDesc = `Settlement with ${labelFor(id, me)}`;\r\n                  }\r\n                }\r\n\r\n                return (\r\n                  <li key={r.id}>\r\n                    <span className=\"dot blue\" />\r\n                    <span>\r\n                      <b>{displayDesc}</b> — {formatCurrency(shownAmount)}\r\n                      <span className=\"mini\" style={{ marginLeft: 8 }}>\r\n                        by {niceName(r.paidBy, me)} • {r.category}\r\n                      </span>\r\n                    </span>\r\n                    <div style={{ display: \"flex\", gap: 8 }}>\r\n                      <button\r\n                        className=\"btn ghost\"\r\n                        onClick={() => setEditItem(r)}\r\n                      >\r\n                        Edit\r\n                      </button>\r\n                      <button\r\n                        className=\"btn outline\"\r\n                        onClick={() => setConfirmDel(r)}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </div>\r\n\r\n        <CategoryChart data={chart.data} total={chart.total} />\r\n      </section>\r\n\r\n      {/* Modals */}\r\n      {showAdd && (\r\n        <AddExpense\r\n          onClose={() => {\r\n            setShowAdd(false);\r\n            onCloseAdd && onCloseAdd();\r\n            loadMe();\r\n          }}\r\n        />\r\n      )}\r\n      {showSettle && (\r\n        <SettleUp\r\n          onClose={() => {\r\n            setShowSettle(false);\r\n            onCloseSettle && onCloseSettle();\r\n            loadMe();\r\n          }}\r\n        />\r\n      )}\r\n      {editItem && (\r\n        <EditExpense\r\n          item={editItem}\r\n          onClose={() => {\r\n            setEditItem(null);\r\n            loadMe();\r\n          }}\r\n        />\r\n      )}\r\n      {confirmDel && (\r\n        <Confirm\r\n          title=\"Delete expense?\"\r\n          subtitle={confirmDel.description}\r\n          onCancel={() => setConfirmDel(null)}\r\n          onConfirm={async () => {\r\n            try {\r\n              if (!confirmDel.id) throw new Error(\"Missing id (legacy item)\");\r\n              await deleteExpense(confirmDel.id);\r\n            } finally {\r\n              setConfirmDel(null);\r\n              loadMe();\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}